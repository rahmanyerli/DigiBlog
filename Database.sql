USE [master]
GO
/****** Object:  Database [DigiBlog]    Script Date: 22/08/2019 7:24:44 AM ******/
CREATE DATABASE [DigiBlog]
 CONTAINMENT = NONE
 ON  PRIMARY 
( NAME = N'DigiBlog', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL13.SQLEXPRESS\MSSQL\DATA\DigiBlog.mdf' , SIZE = 8192KB , MAXSIZE = UNLIMITED, FILEGROWTH = 65536KB )
 LOG ON 
( NAME = N'DigiBlog_log', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL13.SQLEXPRESS\MSSQL\DATA\DigiBlog_log.ldf' , SIZE = 8192KB , MAXSIZE = 2048GB , FILEGROWTH = 65536KB )
GO
ALTER DATABASE [DigiBlog] SET COMPATIBILITY_LEVEL = 130
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [DigiBlog].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [DigiBlog] SET ANSI_NULL_DEFAULT OFF 
GO
ALTER DATABASE [DigiBlog] SET ANSI_NULLS OFF 
GO
ALTER DATABASE [DigiBlog] SET ANSI_PADDING OFF 
GO
ALTER DATABASE [DigiBlog] SET ANSI_WARNINGS OFF 
GO
ALTER DATABASE [DigiBlog] SET ARITHABORT OFF 
GO
ALTER DATABASE [DigiBlog] SET AUTO_CLOSE ON 
GO
ALTER DATABASE [DigiBlog] SET AUTO_SHRINK OFF 
GO
ALTER DATABASE [DigiBlog] SET AUTO_UPDATE_STATISTICS ON 
GO
ALTER DATABASE [DigiBlog] SET CURSOR_CLOSE_ON_COMMIT OFF 
GO
ALTER DATABASE [DigiBlog] SET CURSOR_DEFAULT  GLOBAL 
GO
ALTER DATABASE [DigiBlog] SET CONCAT_NULL_YIELDS_NULL OFF 
GO
ALTER DATABASE [DigiBlog] SET NUMERIC_ROUNDABORT OFF 
GO
ALTER DATABASE [DigiBlog] SET QUOTED_IDENTIFIER OFF 
GO
ALTER DATABASE [DigiBlog] SET RECURSIVE_TRIGGERS OFF 
GO
ALTER DATABASE [DigiBlog] SET  ENABLE_BROKER 
GO
ALTER DATABASE [DigiBlog] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
GO
ALTER DATABASE [DigiBlog] SET DATE_CORRELATION_OPTIMIZATION OFF 
GO
ALTER DATABASE [DigiBlog] SET TRUSTWORTHY OFF 
GO
ALTER DATABASE [DigiBlog] SET ALLOW_SNAPSHOT_ISOLATION OFF 
GO
ALTER DATABASE [DigiBlog] SET PARAMETERIZATION SIMPLE 
GO
ALTER DATABASE [DigiBlog] SET READ_COMMITTED_SNAPSHOT ON 
GO
ALTER DATABASE [DigiBlog] SET HONOR_BROKER_PRIORITY OFF 
GO
ALTER DATABASE [DigiBlog] SET RECOVERY SIMPLE 
GO
ALTER DATABASE [DigiBlog] SET  MULTI_USER 
GO
ALTER DATABASE [DigiBlog] SET PAGE_VERIFY CHECKSUM  
GO
ALTER DATABASE [DigiBlog] SET DB_CHAINING OFF 
GO
ALTER DATABASE [DigiBlog] SET FILESTREAM( NON_TRANSACTED_ACCESS = OFF ) 
GO
ALTER DATABASE [DigiBlog] SET TARGET_RECOVERY_TIME = 60 SECONDS 
GO
ALTER DATABASE [DigiBlog] SET DELAYED_DURABILITY = DISABLED 
GO
ALTER DATABASE [DigiBlog] SET QUERY_STORE = OFF
GO
USE [DigiBlog]
GO
ALTER DATABASE SCOPED CONFIGURATION SET LEGACY_CARDINALITY_ESTIMATION = OFF;
GO
ALTER DATABASE SCOPED CONFIGURATION SET MAXDOP = 0;
GO
ALTER DATABASE SCOPED CONFIGURATION SET PARAMETER_SNIFFING = ON;
GO
ALTER DATABASE SCOPED CONFIGURATION SET QUERY_OPTIMIZER_HOTFIXES = OFF;
GO
USE [DigiBlog]
GO
/****** Object:  Table [dbo].[Article]    Script Date: 22/08/2019 7:24:44 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Article](
	[Id] [varchar](32) NOT NULL,
	[Name] [varchar](100) NOT NULL,
	[Text] [varchar](max) NOT NULL,
	[ImageUrl] [varchar](100) NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
	[Status] [varchar](1) NOT NULL,
	[CategoryId] [varchar](32) NOT NULL,
	[UserId] [varchar](32) NULL,
 CONSTRAINT [PK_Article] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Category]    Script Date: 22/08/2019 7:24:44 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Category](
	[Id] [varchar](32) NOT NULL,
	[Name] [varchar](100) NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
	[Status] [varchar](1) NOT NULL,
 CONSTRAINT [PK_Category] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Comment]    Script Date: 22/08/2019 7:24:44 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Comment](
	[Id] [varchar](32) NOT NULL,
	[Text] [varchar](max) NULL,
	[Rating] [int] NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
	[Status] [varchar](1) NOT NULL,
	[ArticleId] [varchar](32) NOT NULL,
	[UserId] [varchar](32) NOT NULL,
 CONSTRAINT [PK_Comment] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Role]    Script Date: 22/08/2019 7:24:44 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Role](
	[Id] [varchar](32) NOT NULL,
	[Name] [varchar](100) NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
	[Status] [varchar](1) NOT NULL,
 CONSTRAINT [PK_Role] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[User]    Script Date: 22/08/2019 7:24:44 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[User](
	[Id] [varchar](32) NOT NULL,
	[Username] [varchar](100) NOT NULL,
	[FullName] [varchar](100) NOT NULL,
	[Email] [varchar](100) NOT NULL,
	[PasswordHash] [varbinary](64) NOT NULL,
	[PasswordSalt] [varbinary](128) NOT NULL,
	[ImageUrl] [nvarchar](max) NULL,
	[CreatedAt] [datetime] NOT NULL,
	[ModifiedAt] [datetime] NOT NULL,
	[Status] [varchar](1) NOT NULL,
	[RoleId] [varchar](32) NOT NULL,
 CONSTRAINT [PK_User] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
INSERT [dbo].[Article] ([Id], [Name], [Text], [ImageUrl], [CreatedAt], [ModifiedAt], [Status], [CategoryId], [UserId]) VALUES (N'8E3FB23CF7544977A816E1E9379F6101', N'Demo Article - Second', N'Apparently we had reached a great height in the atmosphere, for the sky was a dead black, and the stars had ceased to twinkle. By the same illusion which lifts the horizon of the sea to the level of the spectator on a hillside, the sable cloud beneath was dished out, and the car seemed to float in the middle of an immense dark sphere, whose upper half was strewn with silver.', NULL, CAST(N'2019-08-21T21:03:56.617' AS DateTime), CAST(N'2019-08-21T21:03:56.617' AS DateTime), N'A', N'5BEBC133A74041A9B84E828C50A9D71C', N'8AD828A392BB437CA304CDF4D0A29B00')
GO
INSERT [dbo].[Article] ([Id], [Name], [Text], [ImageUrl], [CreatedAt], [ModifiedAt], [Status], [CategoryId], [UserId]) VALUES (N'94FFAAC8178646D2B0040D997FFB8D7B', N'Demo Article - First', N'As I went on, still gaining velocity, the palpitation of night and day merged into one continuous greyness; the sky took on a wonderful deepness of blue, a splendid luminous color like that of early twilight; the jerking sun became a streak of fire, a brilliant arch, in space; the moon a fainter fluctuating band; and I could see nothing of the stars, save now and then a brighter circle flickering in the blue.', NULL, CAST(N'2019-08-21T20:55:50.270' AS DateTime), CAST(N'2019-08-21T20:56:35.200' AS DateTime), N'A', N'5BEBC133A74041A9B84E828C50A9D71C', N'8AD828A392BB437CA304CDF4D0A29B00')
GO
INSERT [dbo].[Category] ([Id], [Name], [CreatedAt], [ModifiedAt], [Status]) VALUES (N'5BEBC133A74041A9B84E828C50A9D71C', N'Demo Category - First', CAST(N'2019-08-21T20:32:49.423' AS DateTime), CAST(N'2019-08-21T21:06:50.050' AS DateTime), N'A')
GO
INSERT [dbo].[Category] ([Id], [Name], [CreatedAt], [ModifiedAt], [Status]) VALUES (N'65440BA1CF734DD4B1EC25835BF37411', N'Demo Category - Second', CAST(N'2019-08-21T21:06:06.167' AS DateTime), CAST(N'2019-08-21T21:07:10.103' AS DateTime), N'A')
GO
INSERT [dbo].[Comment] ([Id], [Text], [Rating], [CreatedAt], [ModifiedAt], [Status], [ArticleId], [UserId]) VALUES (N'C98DC191E1004A61A9C725105DE755F9', N'I shall see the face of Mars, anyhow, and that will be a rare experience. It seems to me that a view of the heavenly bodies through a fine telescope, as well as a tour round the world, should form a part of a liberal education.', 9, CAST(N'2019-08-21T21:16:02.427' AS DateTime), CAST(N'2019-08-21T21:17:37.060' AS DateTime), N'A', N'94FFAAC8178646D2B0040D997FFB8D7B', N'8AD828A392BB437CA304CDF4D0A29B00')
GO
INSERT [dbo].[Comment] ([Id], [Text], [Rating], [CreatedAt], [ModifiedAt], [Status], [ArticleId], [UserId]) VALUES (N'E4477E21671E4089A29DBB03922B5ADD', N'A peep at some distant orb has power to raise and purify our thoughts like a strain of sacred music, or a noble picture, or a passage from the grander poets. It always does one good.', 7, CAST(N'2019-08-21T21:15:02.033' AS DateTime), CAST(N'2019-08-21T21:15:02.033' AS DateTime), N'A', N'94FFAAC8178646D2B0040D997FFB8D7B', N'CEFB6D04774D41D89F16E7F56B094F23')
GO
INSERT [dbo].[Role] ([Id], [Name], [CreatedAt], [ModifiedAt], [Status]) VALUES (N'3FA0D02550994106887DFC6B0D6FC1E2', N'Member', CAST(N'2019-08-21T16:50:22.740' AS DateTime), CAST(N'2019-08-21T16:52:47.193' AS DateTime), N'A')
GO
INSERT [dbo].[Role] ([Id], [Name], [CreatedAt], [ModifiedAt], [Status]) VALUES (N'9FF389EDB1DA43ACAF231638D428E85C', N'Author', CAST(N'2019-08-21T16:50:15.837' AS DateTime), CAST(N'2019-08-21T16:50:15.837' AS DateTime), N'A')
GO
INSERT [dbo].[Role] ([Id], [Name], [CreatedAt], [ModifiedAt], [Status]) VALUES (N'BEE38CCF65774CDBBAC28F590A3916E3', N'Admin', CAST(N'2019-08-21T16:49:56.667' AS DateTime), CAST(N'2019-08-21T16:49:56.667' AS DateTime), N'A')
GO
INSERT [dbo].[User] ([Id], [Username], [FullName], [Email], [PasswordHash], [PasswordSalt], [ImageUrl], [CreatedAt], [ModifiedAt], [Status], [RoleId]) VALUES (N'8AD828A392BB437CA304CDF4D0A29B00', N'demoauthor', N'Demo Author', N'demoauthor@gmail.com', 0x41F47B875075A5BCAAD31171888AAB52C360E49A955D97089340051F2DCCA00F1F257ABCDBFD7EC2872F67784BA6F42E221B7127122B72636676217E15364665, 0x2D66198C19F17CCE9FE38A706F2D4029C389868E698D220163225B86210F883F1C0549D7E08079629AD0BD9D2FE4717D250605A15F85975D15265EDDECB92A9B181A9409960FCCCB2C9C1D4726A1E62C24F832BDC58D3A2F7890BBEED13BBB872335A586AD9C83D2D51E508B59DE1BC4C1E03060D7D2756DFCEF040A3598E37D, NULL, CAST(N'2019-08-21T17:09:31.167' AS DateTime), CAST(N'2019-08-21T17:09:31.167' AS DateTime), N'A', N'9FF389EDB1DA43ACAF231638D428E85C')
GO
INSERT [dbo].[User] ([Id], [Username], [FullName], [Email], [PasswordHash], [PasswordSalt], [ImageUrl], [CreatedAt], [ModifiedAt], [Status], [RoleId]) VALUES (N'CEFB6D04774D41D89F16E7F56B094F23', N'demomember', N'Demo Member', N'demomember@gmail.com', 0x6A9F1E9DB5400668F2A4E6D0154329249486B47170EA89B27BF08C088CEB007EB2665A1237708673A5CDE998BB373DD9A7AE393661AADB67150190B85561F34C, 0x69E1A9A4D5CFDB97B3E9DF7594E5F527440B097CC1A5B19D794A334A7103AA91F8205183496E4E7721AAD73434AABDBE11E22FB325D01D160A3E7CB225389844ABC946F4C0A7C575F5EECECA600CD1FD19D2388E5C721CAB071E9CF79426085474E946BEFD56879834E97298D388BAC048B183AB9FA384AF571F0AD8830E4540, NULL, CAST(N'2019-08-21T17:10:27.597' AS DateTime), CAST(N'2019-08-21T17:10:27.597' AS DateTime), N'A', N'3FA0D02550994106887DFC6B0D6FC1E2')
GO
INSERT [dbo].[User] ([Id], [Username], [FullName], [Email], [PasswordHash], [PasswordSalt], [ImageUrl], [CreatedAt], [ModifiedAt], [Status], [RoleId]) VALUES (N'FEC71289A7BA4DEAB90EE01C74008CBD', N'demoadmin', N'Demo Admin', N'demoadmin@gmail.com', 0x193DB466FC66D1EE5D13BB7123D3692C545F5AFB72DBC2FB8497B229BE1BF0A61ABFDBB2139A698AEF044158C51B173288727BE0F3A2E798F43609C110BA2D68, 0x521045EE8A4B2F67392AA3E605B1B8A543B65BF9FC1E7F67DB48766DB18D1B9947F09F193A647169997FC12D5044F405EF2175EA0B64C9AEEC1D384C3794A7310259E823CBFCE4BB928DBD912E61B579D3363AB30BA8BDAC70C4E0FB4B5782E05DA21F24AB530668DF8C23EE4D952021DA0B2F3FB55849C190084ABB8DD71253, NULL, CAST(N'2019-08-21T17:06:05.363' AS DateTime), CAST(N'2019-08-21T17:06:05.363' AS DateTime), N'A', N'BEE38CCF65774CDBBAC28F590A3916E3')
GO
SET ANSI_PADDING ON
GO
/****** Object:  Index [IX_Article_CategoryId]    Script Date: 22/08/2019 7:24:44 AM ******/
CREATE NONCLUSTERED INDEX [IX_Article_CategoryId] ON [dbo].[Article]
(
	[CategoryId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO
SET ANSI_PADDING ON
GO
/****** Object:  Index [IX_Article_UserId]    Script Date: 22/08/2019 7:24:44 AM ******/
CREATE NONCLUSTERED INDEX [IX_Article_UserId] ON [dbo].[Article]
(
	[UserId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO
SET ANSI_PADDING ON
GO
/****** Object:  Index [IX_Comment_ArticleId]    Script Date: 22/08/2019 7:24:44 AM ******/
CREATE NONCLUSTERED INDEX [IX_Comment_ArticleId] ON [dbo].[Comment]
(
	[ArticleId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO
SET ANSI_PADDING ON
GO
/****** Object:  Index [IX_Comment_UserId]    Script Date: 22/08/2019 7:24:44 AM ******/
CREATE NONCLUSTERED INDEX [IX_Comment_UserId] ON [dbo].[Comment]
(
	[UserId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO
SET ANSI_PADDING ON
GO
/****** Object:  Index [IX_User_RoleId]    Script Date: 22/08/2019 7:24:44 AM ******/
CREATE NONCLUSTERED INDEX [IX_User_RoleId] ON [dbo].[User]
(
	[RoleId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO
ALTER TABLE [dbo].[Article]  WITH CHECK ADD  CONSTRAINT [FK_Article_Category_CategoryId] FOREIGN KEY([CategoryId])
REFERENCES [dbo].[Category] ([Id])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Article] CHECK CONSTRAINT [FK_Article_Category_CategoryId]
GO
ALTER TABLE [dbo].[Article]  WITH CHECK ADD  CONSTRAINT [FK_Article_User_UserId] FOREIGN KEY([UserId])
REFERENCES [dbo].[User] ([Id])
GO
ALTER TABLE [dbo].[Article] CHECK CONSTRAINT [FK_Article_User_UserId]
GO
ALTER TABLE [dbo].[Comment]  WITH CHECK ADD  CONSTRAINT [FK_Comment_Article_ArticleId] FOREIGN KEY([ArticleId])
REFERENCES [dbo].[Article] ([Id])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Comment] CHECK CONSTRAINT [FK_Comment_Article_ArticleId]
GO
ALTER TABLE [dbo].[Comment]  WITH CHECK ADD  CONSTRAINT [FK_Comment_User_UserId] FOREIGN KEY([UserId])
REFERENCES [dbo].[User] ([Id])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Comment] CHECK CONSTRAINT [FK_Comment_User_UserId]
GO
ALTER TABLE [dbo].[User]  WITH CHECK ADD  CONSTRAINT [FK_User_Role_RoleId] FOREIGN KEY([RoleId])
REFERENCES [dbo].[Role] ([Id])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[User] CHECK CONSTRAINT [FK_User_Role_RoleId]
GO
USE [master]
GO
ALTER DATABASE [DigiBlog] SET  READ_WRITE 
GO
